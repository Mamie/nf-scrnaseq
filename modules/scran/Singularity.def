Bootstrap: docker

From: continuumio/miniconda3

%post
    wget https://raw.githubusercontent.com/Mamie/nf-scrnaseq/main/modules/scran/environment.yml
    /opt/conda/bin/conda env create -f environment.yml

%runscript
    exec /opt/conda/envs/$(head -n 1 environment.yml | cut -f 2 -d ' ')/bin/"$@"
    opt/conda/envs/scran/bin/R -e 'library(reticulate); py_config()'